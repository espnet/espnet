# Default configuration
command sbatch --export=PATH
option name=* --job-name $0
default time=2-00:00:00
option time=* --time $0
# default mem=2G
option mem=* --mem-per-cpu $0
option mem=0
option num_threads=* --cpus-per-task $0
option num_threads=1 --cpus-per-task 1
option num_nodes=* --nodes $0
default gpu=0
option gpu=0 -p cpu --account=bbjs-delta-cpu --mem-per-cpu 4G
option gpu=3 -p ghx4 --gres=gpu:3  -c 210 --mem 360G --account=bbjs-dtai-gh
option gpu=4 -p ghx4 --gres=gpu:4  -c 280 --mem 720G --account=bbjs-dtai-gh
option gpu=* -p ghx4 --gres=gpu:$0 -c $((70 * $0)) --mem $((120 * $0))G --account=bbjs-dtai-gh
option num_tasks=* --ntasks-per-node $0
# option gpu=* -p ghx4 --gres=gpu:$0 -c $0 -c 70 --mem-per-cpu 10G --account=bbjs-dtai-gh
# option gpu=* -p gpuA100x4 --reservation=sup-10124 --account=bbjs-delta-gpu --gres=gpu:$0 -c $0  # Recommend allocating more CPU than, or equal to the number of GPU
# gpuA40x4,gpuA100x8
