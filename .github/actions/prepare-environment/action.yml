name: Action prepare environment

inputs:
  python-version:
    required: true
    type: boolean
  pytorch-version:
    required: true
    type: string
  chainer-version:
    required: true
    type: string
  use-conda:
    required: true
    type: boolean


runs:
  using: "composite"
  steps:
    - uses: actions/setup-python@v5
      with:
        python-version: ${{ inputs.python-version }}
        architecture: 'x64'
    - name: install dependencies
      shell: bash
      run: |
        sudo apt-get update -qq
        # NOTE(kamo): g++-7 doesn't exist in ubuntu-latest
        sudo apt-get install -qq -y cmake libsndfile1-dev bc sox ffmpeg
    - name: install espnet
      shell: bash
      env:
        ESPNET_PYTHON_VERSION: ${{ inputs.python-version }}
        TH_VERSION: ${{ inputs.pytorch-version }}
        CHAINER_VERSION: ${{ inputs.chainer-version }}
        USE_CONDA: ${{ inputs.use-conda }}
      run: |
        ./ci/install.sh
